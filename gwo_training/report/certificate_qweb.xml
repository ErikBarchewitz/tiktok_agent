<odoo>
    <data>
        <template id="report_gwo_certificate">
            <t t-call="web.external_layout">
                <div class="page">
                    <h2 class="text-center">GWO Training Certificate</h2>
                    <p class="text-center">
                        <strong t-esc="doc.user_id.partner_id.name"/> has successfully completed the refresher training
                        <strong t-esc="doc.course_id.name"/>.
                    </p>
                    <p>
                        Final score: <span t-esc="'%.2f%%' % doc.final_exam_score"/>.<br/>
                        Training domain: <span t-esc="dict(doc.course_id._fields['gwo_domain'].selection).get(doc.course_id.gwo_domain)"/>.<br/>
                        Certificate valid until:
                        <t t-set="expiry_base" t-value="doc.last_activity.date() if doc.last_activity else fields.Date.today()"/>
                        <t t-set="expiry" t-value="fields.Date.add(expiry_base, months=doc.course_id.validity_months)"/>
                        <span t-esc="expiry"/>
                    </p>
                    <p>
                        Generated on <span t-esc="fields.Date.today()"/>.
                    </p>
                </div>
            </t>
        </template>

        <report
            id="action_report_gwo_certificate"
            string="GWO Certificate"
            model="gwo.enrollment"
            report_type="qweb-pdf"
            name="gwo_training.report_gwo_certificate"
            file="gwo_training.report_gwo_certificate"
        />
    </data>
</odoo>
